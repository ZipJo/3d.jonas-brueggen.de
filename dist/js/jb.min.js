const jb_scripts={contentChanger:{currentActive:null,allowedNames:["home","projects","about","x404"],init(){window.onhashchange=function(){jb_scripts.contentChanger.changeContent()},this.changeContent()},changeContent(e=window.location.hash){let t=""==e?"home":e.substr(2);if(this.clearClasses(),jb_events.destroyHomeScrollEvents(),jb_DOManimation.stop(),this.allowedNames.includes(t)){if(t!==this.currentActive&&null!==this.currentActive&&"home"!=this.currentActive?"home"==t?(document.querySelector("header").classList.remove("top"),document.querySelector("section."+this.currentActive).classList.add("toHome"),jb_events.addHomeScrollEvents(),setTimeout((function(){jb_DOManimation.start()}),600)):(document.querySelector("header").classList.add("top"),document.querySelector("header nav").classList.add(t),"projects"==this.currentActive&&"about"==t?(document.querySelector("section.projects").classList.add("active"),setTimeout((function(){document.querySelector("section.projects").classList.remove("active"),document.querySelector("section.about").classList.add("active"),document.querySelector("section.about").classList.add("projectsToAbout"),document.querySelector("section.projects").classList.add("projectsToAbout")}),250)):"about"==this.currentActive&&"projects"==t?(document.querySelector("section.projects").classList.add("active"),document.querySelector("section.about").classList.add("aboutToProjects"),document.querySelector("section.projects").classList.add("aboutToProjects")):document.querySelector("section."+t).classList.add("active")):"home"==this.currentActive&&"home"!=t?(document.querySelector("header").classList.add("top"),document.querySelector("header nav").classList.add(t),document.querySelector("section."+t).classList.add("active","fromHome")):null===this.currentActive&&"home"!=t?setTimeout((function(){document.querySelector("header nav").classList.add(t),document.querySelector("header").classList.add("top"),document.querySelector("section."+t).classList.add("active","fromHome")}),500):null===this.currentActive&&"home"==t&&(jb_events.addHomeScrollEvents(),jb_DOManimation.start(),setTimeout((function(){"home"==jb_scripts.contentChanger.currentActive&&document.querySelector("header > span.enter").classList.add("visible")}),5e3)),"projects"==t){document.querySelectorAll(".wrapper section.projects .project .cover").forEach((function(e){e.style.setProperty("--rnd-1",Math.floor(1e3*Math.random())/1e3),e.style.setProperty("--rnd-2",Math.floor(1e3*Math.random())/1e3)})),jb_scripts.removeRandomBackgrounds(),jb_scripts.setRandomBackgrounds()}this.currentActive=t}else this.changeContent("#/x404")},clearClasses(){let e=document.querySelectorAll("section"),t=document.querySelector("header"),a=document.querySelector("header nav"),s=["active","projectsToAbout","aboutToProjects","toHome","fromHome","top"],n=document.querySelectorAll("section.projects .project .cover.active");document.querySelector("header > span.enter").classList.remove("visible"),t.classList.remove(...s),a.classList.remove(...a.classList),e.forEach((function(e){e.classList.remove(...s)})),n.forEach((function(e){jb_scripts.projectCoverAnimation(e)}))},toggleHash(e=window.location.hash){window.location.hash=""==e||"#/home"==e?"#/projects":""}},coverMouseLeaveFromActive(){this.classList.remove("fromActive"),this.removeEventListener("mouseleave",jb_scripts.coverMouseLeaveFromActive)},projectCoverAnimation(e){if(e.classList.contains("active")){e.style.setProperty("--rnd-1","0"),e.classList.remove("active"),e.classList.add("fromActive"),e.style.animation="",e.style.webkitAnimation="",e.style.transform="",jb_events.vars.isMobile||setTimeout((function(){e.addEventListener("mouseleave",jb_scripts.coverMouseLeaveFromActive)}),600);let t=e.parentElement.querySelector(".details");t.style.maxHeight="",t.style.padding=""}else{e.classList.remove("fromActive");let t=new WebKitCSSMatrix(window.getComputedStyle(e).transform),a=Math.round(1e4*t.m41)/1e4,s=[{transform:"translateX("+a+"px)"},{transform:"translateX(0px)"}],n={duration:400,easing:"cubic-bezier(.4,0,.35,1.35)"};e.animate(s,n),requestAnimationFrame((function(){e.style.animation="none",e.style.webkitAnimation="none",e.style.setProperty("--rnd-1","0"),e.style.transform="translateX("+a+"px)",e.classList.add("active"),requestAnimationFrame((function(){e.style.transform="translateX(0px)",setTimeout((function(){e.style.animation="none"}),200)}));let t=e.parentElement.querySelector(".details");t.style.maxHeight=10+t.scrollHeight+"px",t.style.padding="var(--padding)";let s=2*parseInt(getComputedStyle(t).getPropertyValue("--padding"),10)+jb_scripts.fullOffsetTop(t)+t.scrollHeight-window.innerHeight;window.pageYOffset<s&&setTimeout((function(){window.scrollTo({behavior:"smooth",top:s})}),200)}))}},customPopup(e,t,a=null,s=""){if(null==a){for(popupContainer=document.querySelector(".popup_container");popupContainer.firstChild;)popupContainer.removeChild(popupContainer.firstChild);let a=document.createElement("div");return a.innerHTML=e,a.style.maxWidth=t,a.className=s,popupContainer.append(a),popupContainer.classList.add("active"),history.pushState(null,null),window.addEventListener("popstate",jb_scripts.closePopup),requestAnimationFrame((function(){setTimeout((function(){a.classList.add("move")}),10)})),popupContainer}{let e=new XMLHttpRequest;e.open("get",a),e.onload=function(){jb_scripts.customPopup(e.response,t)},e.send()}},closePopup(){document.querySelector(".popup_container.active").classList.remove("active"),window.removeEventListener("popstate",jb_scripts.closePopup)},touchRemover(e){let t=e.parentNode,a=e.nextSibling;setTimeout((function(){t.removeChild(e),t.insertBefore(e,a)}),500)},setRandomBackgrounds(){let e=["bg1","bg2","bg3","bg4","bg5"],t=document.querySelectorAll(".wrapper section.projects .project"),a=-1,s=-1;for(let n=0;n<t.length;n++){let i=Math.floor(Math.random()*e.length),o=a,r=s;for(;i==o||i==r;)i=Math.floor(Math.random()*e.length);t[n].classList.add(e[i]),s=a,a=i}},removeRandomBackgrounds(){let e=["bg1","bg2","bg3","bg4","bg5"];document.querySelectorAll(".wrapper section.projects .project").forEach((function(t){t.classList.remove(...e)}))},colorLogo(e=!0){let t=document.getElementById("id_logo_wrapper");e?t.classList.add("animate_in"):t.classList.remove("animate_in")},triggerContactTileAnimation(){let e=document.getElementById("id_contact_tiles");e.scrollIntoView({behavior:"smooth",block:"nearest"}),e.classList.add("start_animation"),requestAnimationFrame((function(){setTimeout((function(){e.classList.remove("start_animation")}),1100)}))},fullOffsetTop(e){let t=0;return e.offsetParent&&(t+=this.fullOffsetTop(e.offsetParent)),t+=e.offsetTop,t},objDeepExtend(e,t){for(var a in t)t[a]&&t[a].constructor&&t[a].constructor===Object?(e[a]=e[a]||{},arguments.callee(e[a],t[a])):e[a]=t[a];return e},addProject(e,t,a,s,n,i,o){let r=document.querySelector("section.projects"),c=document.createElement("div"),d=`\n<div class="cover" onclick="jb_scripts.projectCoverAnimation(this);">\n\t<div class="logo">\n\t\t<picture>\n\t\t\t<source srcset="files/projects/${e}/logo_${e}_small.png, files/projects/${e}/logo_${e}_medium.png 1.5x" media="(max-width: 900px)">\n\t\t\t<source srcset="files/projects/${e}/logo_${e}_medium.png, files/projects/${e}/logo_${e}_large.png 1.5x" media="(min-width: 900px)">\n\t\t\t<img src="files/projects/${e}/logo_${e}_medium.png" alt="logo project ${a}" />\n\t\t</picture>\n\t</div>\n\t<div class="title">\n\t\t<h1>${a}</h1>\n\t\t<h2>${s}</h2>\n\t</div>\n</div>\n<div class="details">\n\t<div class="description">\n\t\t<p>${n}</p>\n\t\t<p>${i}</p>\n\t\t<h4>${o}</h4>\n\t</div>\n\t<span class="btn" onclick="jb_scripts.customPopup(jb_scripts.projectPopupHtml('${e}','${a}','${t}'), '85vw', null, this.parentElement.parentElement.className );">preview</span>\n</div>`;c.classList.add("project"),c.innerHTML=d,r.append(c)},projectPopupHtml(e,t,a){let s=`\n<picture>\n\t<source srcset="files/projects/${e}/pc_${e}_medium.png, files/projects/${e}/pc_${e}_large.png 1.5x">\n\t<img onload="this.parentElement.parentElement.parentElement.classList.add('loaded');" src="files/projects/${e}/pc_${e}_medium.png" alt="Project ${t}, PC view" />\n</picture>`,n=`\n<picture>\n\t<source srcset="files/projects/${e}/phone_${e}_small.png, files/projects/${e}/phone_${e}_medium.png 1.5x">\n\t<img onload="this.parentElement.parentElement.parentElement.classList.add('loaded');" src="files/projects/${e}/phone_${e}_small.png" alt="Project ${t}, smartphone view" />\n</picture>`;""==a?(a="No live version available",s="<span>"+s+"</span>",n="<span>"+n+"</span>"):(s='<a href="'+a+'" target="_blank">'+s+"</a>",n='<a href="'+a+'" target="_blank">'+n+"</a>",a='<a class="pagelink" href="'+a+'" target="_blank" ontouchend="jb_scripts.touchRemover(this);">Visit the page</a>');let i="";return i=window.innerWidth<900?'<div class="pictures image_phone">'+n:'<div class="pictures image_pc">'+s,i+='<span class="loader"></span><p>'+a+"<a>close</a></p></div>",i}},jb_events={vars:{onhover:{enable:!0},onclick:{enable:!0},deviceOrientation:{sensorStatus:!1,tiltAccuracy:1e3,motionAccuracy:1e3},scroll:{homeTouchstart:null},status:"initial",isResized:!1,isMobile:!1},iosPermission(){DeviceMotionEvent.requestPermission().then(e=>{"granted"==e&&(window.addEventListener("deviceorientation",jb_events.deviceOrientationEvent),window.addEventListener("devicemotion",jb_events.deviceMotionEvent))}).catch(console.error)},addEvents(){if(this.vars.onhover.enable)if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||/Mac/i.test(navigator.userAgent)&&"undefined"!=typeof DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission)this.vars.isMobile=!0,"undefined"!=typeof DeviceOrientationEvent&&("function"==typeof DeviceOrientationEvent.requestPermission&&/iPhone|iPad|iPod|Mac/i.test(navigator.userAgent)?DeviceMotionEvent.requestPermission().then(e=>{e&&(window.addEventListener("deviceorientation",this.deviceOrientationEvent),window.addEventListener("devicemotion",this.deviceMotionEvent))}).catch((function(e){jb_scripts.customPopup("<p>You seem to be using an iOS device.<br>This page is better, if you grant permissions for motion and orientation sensors!</p><a href='' class='fancy_link' style='pointer-events:none;'>okay</a>","250px",null,"ios_popup").addEventListener("click",jb_events.iosPermission,{once:!0})})):(window.addEventListener("deviceorientation",this.deviceOrientationEvent),window.addEventListener("devicemotion",this.deviceMotionEvent)),"screen"in window&&"orientation"in window.screen?(window.screen.orientation.addEventListener("change",jb_events.screenOrientationAction),window.addEventListener("resize",jb_events.screenOrientationAction)):window.addEventListener("orientationchange",jb_events.screenOrientationAction),jb_events.screenOrientationAction());else{let e=document.createElement("span");e.innerHTML="This page is more fun<br>on a mobile device!",e.classList.add("pc_info_span","visible"),document.body.prepend(e),setTimeout((function(){e.classList.remove("visible"),setTimeout((function(){document.body.removeChild(e)}),2e3)}),5e3),window.addEventListener("mousemove",this.mouseMoveAction),window.addEventListener("mouseleave",this.mouseLeaveAction)}this.vars.onclick.enable&&(window.addEventListener("touch",this.clickAction),window.addEventListener("click",this.clickAction)),window.addEventListener("resize",(function(){jb_events.vars.isResized=!0}))},addHomeScrollEvents(){window.addEventListener("wheel",this.home_wheelAction),window.addEventListener("touchmove",this.home_touchmoveAction)},destroyHomeScrollEvents(){window.removeEventListener("wheel",this.home_wheelAction),window.removeEventListener("touchmove",this.home_touchmoveAction)},home_wheelAction(e){e.deltaY>0&&(jb_scripts.contentChanger.toggleHash(),jb_events.destroyHomeScrollEvents())},home_touchmoveAction(e){null===jb_events.vars.scroll.homeTouchstart&&(jb_events.vars.scroll.homeTouchstart=e.touches[0].clientY),jb_events.vars.scroll.homeTouchdeltaY=jb_events.vars.scroll.homeTouchstart-e.touches[0].clientY,jb_events.vars.scroll.homeTouchdeltaY>20&&(jb_events.vars.scroll.homeTouchstart=null,jb_scripts.contentChanger.toggleHash(),jb_events.destroyHomeScrollEvents())},mouseMoveAction(e){let t=e.clientX,a=e.clientY;jb_events.vars.onhover.pos_x=t,jb_events.vars.onhover.pos_y=a,jb_events.vars.status="mousemove"},mouseLeaveAction(){jb_events.vars.onhover.pos_x=null,jb_events.vars.onhover.pos_y=null,jb_events.vars.status="mouseleave"},clickAction(e){jb_events.vars.onclick.click_pos_x=e.clientX,jb_events.vars.onclick.click_pos_y=e.clientY},screenOrientationAction(){"screen"in window&&"orientation"in window.screen?jb_events.vars.screenOrientationAngle=screen.orientation.angle:jb_events.vars.screenOrientationAngle=-90==window.orientation?270:window.orientation},deviceOrientationEvent(e){jb_events.vars.deviceOrientation.sensorStatus=!0,jb_events.vars.status="tilt";let t=e.alpha,a=e.beta,s=e.gamma;90==jb_events.vars.screenOrientationAngle?(a=-e.gamma,s=e.beta):270==jb_events.vars.screenOrientationAngle&&(a=e.gamma,s=-e.beta),null==jb_events.vars.deviceOrientation.initialOffset&&(jb_events.vars.deviceOrientation.initialOffset=e.alpha),t=e.alpha-jb_events.vars.deviceOrientation.initialOffset,t<0&&(t+=360),jb_events.vars.deviceOrientation.tilt_alpha=Math.round(t*jb_events.vars.deviceOrientation.tiltAccuracy)/jb_events.vars.deviceOrientation.tiltAccuracy,jb_events.vars.deviceOrientation.tilt_beta=Math.round(a*jb_events.vars.deviceOrientation.tiltAccuracy)/jb_events.vars.deviceOrientation.tiltAccuracy,jb_events.vars.deviceOrientation.tilt_gamma=Math.round(s*jb_events.vars.deviceOrientation.tiltAccuracy)/jb_events.vars.deviceOrientation.tiltAccuracy},deviceMotionEvent(e){jb_events.vars.deviceOrientation.sensorStatus=!0,jb_events.vars.status="tilt";let t=e.rotationRate.alpha,a=e.rotationRate.beta,s=e.rotationRate.gamma;90==jb_events.vars.screenOrientationAngle?(t=-e.rotationRate.beta,a=e.rotationRate.alpha):270==jb_events.vars.screenOrientationAngle&&(t=e.rotationRate.beta,a=-e.rotationRate.alpha),jb_events.vars.deviceOrientation.rotation_alpha=Math.round(t*jb_events.vars.deviceOrientation.motionAccuracy)/jb_events.vars.deviceOrientation.motionAccuracy,jb_events.vars.deviceOrientation.rotation_beta=Math.round(a*jb_events.vars.deviceOrientation.motionAccuracy)/jb_events.vars.deviceOrientation.motionAccuracy,jb_events.vars.deviceOrientation.rotation_gamma=Math.round(s*jb_events.vars.deviceOrientation.motionAccuracy)/jb_events.vars.deviceOrientation.motionAccuracy}},jb_anim={data:{threejs:{},options:{}},start(e,t,a){let s=document.querySelector(e);this.data.canvas={elem:s,width:s.parentElement.offsetWidth,height:s.parentElement.offsetHeight},jb_scripts.objDeepExtend(this.data.options,jb_anim_options),t&&jb_scripts.objDeepExtend(this.data.options,t),this.data.threejs.currentQuaternion=new THREE.Quaternion,this.data.threejs.aspect=this.data.canvas.width/this.data.canvas.height,this.data.options.fps>30&&(this.data.options.fps=60),this.data.options.camFrustumNearField=this.data.options.camRotationRadius/3,this.data.options.autoRotationSpeed=Math.round(2*this.data.options.autoRotationSpeed*Math.PI/this.data.options.fps/60*1e6)/1e6,this.init(),this.draw(),this.callback=a},init(){this.initThreeJs(),"undefined"!=typeof Worker&&(this.backgroundMathWorker=new Worker("/js/canvasworker.js"),this.backgroundMathWorker.onmessage=function(e){jb_anim.newWorkerData=!0,jb_anim.workerData=e.data},this.backgroundMathWorker.postMessage(this.getWorkerData())),this.data.options.helpers&&(this.stats=new Stats,document.body.append(this.stats.dom),document.body.insertAdjacentHTML("beforeend",'\n\t\t\t<div class="sm_wrap" onclick="this.classList.toggle(\'expand\');">\n\t\t\t\t<div class="sm" onclick="event.stopPropagation();">\n\t\t\t\t\t<label for="smoothing">motion-smoothing - current: <span id="sm_value"></span>/1000:</label>\n\t\t\t\t\t<input type="range" id="smoothing" name="smoothing" min="900" max="999" value="945">\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>'),this.infobox=document.createElement("div"),this.infobox.classList.add("infobox"),document.body.append(this.infobox),this.infobox.innerHTML="init")},draw(){if(jb_anim.data.options.fps>30?window.requestAnimationFrame(jb_anim.draw):setTimeout(jb_anim.draw,1e3/jb_anim.data.options.fps),jb_anim.eventLoop(),jb_anim.data.options.helpers){let e=document.getElementById("smoothing").value;document.getElementById("sm_value").innerText=e,jb_anim.data.options.motionSmoothing=1-e/1e3}if(void 0!==jb_anim.backgroundMathWorker){if(jb_anim.newWorkerData){jb_anim.newWorkerData=!1;let e=(new THREE.Matrix4).fromArray(jb_anim.workerData.camMatrix);jb_anim.data.threejs.camera.position.setFromMatrixPosition(e),jb_anim.data.threejs.camera.rotation.setFromRotationMatrix(e),jb_anim.data.threejs.particleObject.rotation.fromArray(jb_anim.workerData.particleRotation),jb_anim.data.threejs.particleObject.updateMatrix(),jb_anim.backgroundMathWorker.postMessage(jb_anim.getWorkerData()),jb_anim.data.threejs.camera.updateMatrix(),jb_anim.data.threejs.renderer.clear(),jb_anim.data.threejs.renderer.render(jb_anim.data.threejs.scene,jb_anim.data.threejs.camera),jb_anim.data.options.helpers&&(jb_anim.infobox.thread="multithread"),jb_anim.callback&&(jb_anim.callback(),jb_anim.callback=null)}}else jb_anim.renderThreeJs_singlethread(),jb_anim.data.threejs.camera.updateMatrix(),jb_anim.data.threejs.renderer.clear(),jb_anim.data.threejs.renderer.render(jb_anim.data.threejs.scene,jb_anim.data.threejs.camera),jb_anim.data.options.helpers&&(jb_anim.infobox.thread="singlethread"),jb_anim.callback&&(jb_anim.callback(),jb_anim.callback=null);jb_anim.data.options.helpers&&(jb_anim.stats.update(),jb_anim.infobox.innerHTML="thread: "+jb_anim.infobox.thread+"<br>perspective-animation: "+jb_events.vars.status+"<br>")},getWorkerData(){return{particleMatrix:this.data.threejs.particleObject.matrix.toArray(),eventVars:jb_events.vars,eventStatus:jb_events.vars.status,canvas_width:this.data.canvas.width,canvas_height:this.data.canvas.height,camInit:this.data.threejs.cameraInitialPosition.toArray(),rotationSpeed:this.data.options.autoRotationSpeed}},initThreeJs(){this.data.threejs.scene=new THREE.Scene,this.data.threejs.scene.background=new THREE.Color(this.data.options.bgColor),this.data.threejs.scene.fog=new THREE.Fog({color:this.data.options.bgColor,near:this.data.options.camFrustumNearField,far:this.data.options.camRotationRadius+750}),this.data.threejs.camera=new THREE.PerspectiveCamera(50,this.data.threejs.aspect,this.data.options.camFrustumNearField-50,2e3),this.data.threejs.camera.position.y=this.data.options.camRotationRadius,this.data.threejs.cameraInitialPosition=this.data.threejs.camera.position.clone(),this.data.threejs.scene.add(this.data.threejs.camera);for(var e=new THREE.BufferGeometry,t=[],a=0;a<this.data.options.particleCount;a++)t.push(THREE.MathUtils.randFloatSpread(1500)),t.push(THREE.MathUtils.randFloatSpread(1500)),t.push(THREE.MathUtils.randFloatSpread(1500));let s=this.data.options.camRotationRadius-this.data.options.camFrustumNearField,n=this.data.options.camFrustumNearField*this.data.threejs.aspect*Math.tan(25/180*Math.PI),i=s,o=this.data.options.camFrustumNearField*Math.tan(25/180*Math.PI),r=new THREE.Vector3(n,i,o).length(),c=r-s;for(a=0;a<t.length;a+=3){let e=t[a],n=t[a+1],i=t[a+2],o=new THREE.Vector3(e,n,i),d=o.length();d>s&d<r&&(o.setLength(d-c),t[a]=o.x,t[a+1]=o.y,t[a+2]=o.z)}e.setAttribute("position",new THREE.Float32BufferAttribute(t,3));var d=(new THREE.TextureLoader).load("/js/dot.gif"),l=(new THREE.TextureLoader).load("/js/dot_alpha.bmp");if(this.data.threejs.particleObject=new THREE.Points(e,new THREE.PointsMaterial({size:5,map:d,alphaMap:l,color:16777215,transparent:!0})),this.data.threejs.scene.add(this.data.threejs.particleObject),this.data.options.helpers3D){var h=new THREE.AxesHelper(20);this.data.threejs.scene.add(h);var v=new THREE.Vector3(0,1,0),m=new THREE.Vector3(0,0,0);this.data.threejs.arrowHelper=new THREE.ArrowHelper(v,m,100,16776960),this.data.threejs.scene.add(this.data.threejs.arrowHelper);new THREE.BoxBufferGeometry(50,50,50);var u=new THREE.BoxBufferGeometry(this.data.canvas.width/8.5,1,this.data.canvas.height/8.5),p=new THREE.MeshBasicMaterial({wireframe:!0});this.data.threejs.cubeHelper=new THREE.Mesh(u,p),this.data.threejs.cubeHelper.position.x=s,this.data.threejs.cubeHelper.rotateZ(Math.PI/2),this.data.threejs.scene.add(this.data.threejs.cubeHelper),this.data.threejs.cubeHelper2=new THREE.Mesh(u,p),this.data.threejs.cubeHelper2.position.y=0,this.data.threejs.scene.add(this.data.threejs.cubeHelper2),this.data.threejs.cubeHelper3=new THREE.Mesh(u,p),this.data.threejs.cubeHelper3.position.y=s,this.data.threejs.cubeHelper3.position.x=100,this.data.threejs.scene.add(this.data.threejs.cubeHelper3)}this.data.threejs.camera.matrixAutoUpdate=!1,this.data.threejs.particleObject.matrixAutoUpdate=!1,this.data.threejs.renderer=new THREE.WebGLRenderer({canvas:this.data.canvas.elem,antialias:!0}),this.data.threejs.renderer.setPixelRatio(window.devicePixelRatio),this.data.threejs.renderer.setSize(this.data.canvas.width,this.data.canvas.height),this.data.threejs.renderer.autoClear=!1},renderThreeJs_singlethread(){let e=null;jb_events.vars.deviceOrientation.sensorStatus?(e=this.calc.getEulerObjFromDeviceOrientation(jb_events.vars.deviceOrientation.tilt_alpha,jb_events.vars.deviceOrientation.tilt_beta,jb_events.vars.deviceOrientation.tilt_gamma),this.data.threejs.currentQuaternion=this.calc.calculateCurrentQuaternionFromEulerObj(this.data.threejs.currentQuaternion,e,this.data.options.motionSmoothing)):(e=this.calc.getEulerObjFromMousePosition(jb_events.vars.onhover.pos_x,jb_events.vars.onhover.pos_y,this.data.canvas.width,this.data.canvas.height,this.data.options.hoverPerspectiveContainment),this.data.threejs.currentQuaternion=this.calc.calculateCurrentQuaternionFromEulerObj(this.data.threejs.currentQuaternion,e,this.data.options.motionSmoothing));let t=this.calc.roundVector(this.data.threejs.cameraInitialPosition,this.data.options.vectorAccuracy);t.applyQuaternion(this.data.threejs.currentQuaternion),this.data.threejs.camera.position.x=t.x,this.data.threejs.camera.position.y=t.y,this.data.threejs.camera.position.z=t.z,this.data.threejs.camera.setRotationFromQuaternion(this.data.threejs.currentQuaternion),this.data.threejs.camera.rotateX(-Math.PI/2);let a=new THREE.Vector3(0,1,-4);a.normalize(),a.applyQuaternion(this.data.threejs.currentQuaternion),this.data.threejs.particleObject.rotateOnAxis(a,this.data.options.autoRotationSpeed)},calc:{roundVector(e,t){let a=new THREE.Vector3;return a.x=Math.round(e.x*t)/t,a.y=Math.round(e.y*t)/t,a.z=Math.round(e.z*t)/t,a},getEulerObjFromDeviceOrientation(e,t,a){let s=Math.round(t*Math.PI/180*1e4)/1e4,n=Math.round(e*Math.PI/180*1e4)/1e4,i=-Math.round(a*Math.PI/180*1e4)/1e4,o=new THREE.Euler(s,n,i,"YXZ");return o.reorder("XYZ"),o},getEulerObjFromMousePosition(e,t,a,s,n){void 0!==e&&void 0!==t||(e=.5,t=.5);let i=e/a*n/100,o=t/s*n/100;i-=n/100/2,o-=n/100/2;let r=Math.PI/4*i,c=-Math.PI/4*o;return new THREE.Euler(c,0,r,"XYZ")},calculateCurrentQuaternionFromEulerObj(e,t,a){let s=new THREE.Quaternion,n=new THREE.Quaternion;return n.setFromEuler(t),THREE.Quaternion.slerp(e,n,s,a),s}},eventLoop(){jb_events.vars.isResized&&(this.data.canvas.width=this.data.canvas.elem.parentElement.offsetWidth,this.data.canvas.height=this.data.canvas.elem.parentElement.offsetHeight,this.data.canvas.elem.width=this.data.canvas.width,this.data.canvas.elem.height=this.data.canvas.height,this.data.canvas.isPortrait=this.data.canvas.width<this.data.canvas.height,this.data.threejs.aspect=this.data.canvas.width/this.data.canvas.height,this.data.threejs.renderer.setSize(this.data.canvas.width,this.data.canvas.height),this.data.threejs.camera.aspect=this.data.threejs.aspect,this.data.threejs.camera.updateProjectionMatrix(),jb_events.vars.isResized=!1)}},jb_DOManimation={vars:{mouseAccuracy:1e3,rotation_accuracy:50,animation:!1,mod_logo:10,mod_text:6,c_x:0,c_y:0},perspective(){if(!document.querySelector("header.top")){if(jb_events.vars.onhover.enable&&"mousemove"==jb_events.vars.status){let e=Math.round(jb_events.vars.onhover.pos_x/window.innerWidth*this.vars.mouseAccuracy)/this.vars.mouseAccuracy-.5,t=Math.round(jb_events.vars.onhover.pos_y/window.innerHeight*this.vars.mouseAccuracy)/this.vars.mouseAccuracy-.5;this.vars.c_x=this.ease(this.vars.c_x,e,.055),this.vars.c_y=this.ease(this.vars.c_y,t,.055),this.vars.logo_elem.style.setProperty("transform","rotateY(360deg) translateX("+this.vars.c_x*this.vars.mod_logo+"vmin) translateY("+this.vars.c_y*this.vars.mod_logo+"vmin) translateZ(1px)"),this.vars.text_elem.style.setProperty("transform","translateX("+this.vars.c_x*this.vars.mod_text+"vmin) translateY("+this.vars.c_y*this.vars.mod_text+"vmin) translateZ(0)")}if(jb_events.vars.onhover.enable&&"tilt"==jb_events.vars.status){let e=jb_events.vars.deviceOrientation.rotation_alpha/this.vars.rotation_accuracy,t=jb_events.vars.deviceOrientation.rotation_beta/this.vars.rotation_accuracy;this.vars.c_x=this.ease(this.vars.c_x,t,.035),this.vars.c_y=this.ease(this.vars.c_y,e,.035),this.vars.logo_elem.style.setProperty("transform","rotateY(360deg) translateX("+this.vars.c_x*this.vars.mod_logo+"vmin) translateY("+this.vars.c_y*this.vars.mod_logo+"vmin) translateZ(1px)"),this.vars.text_elem.style.setProperty("transform","translateX("+this.vars.c_x*this.vars.mod_text+"vmin) translateY("+this.vars.c_y*this.vars.mod_text+"vmin) translateZ(0)")}}},start(){this.vars.logo_elem=document.querySelector("header .header_logo"),this.vars.text_elem=document.querySelector("header .logo_subtext"),this.vars.c_x=0,this.vars.c_y=0,this.vars.animation=!0,setTimeout((function(){!0===jb_DOManimation.vars.animation&&(jb_DOManimation.draw(),jb_DOManimation.vars.logo_elem.style.setProperty("transition","none"),jb_DOManimation.vars.text_elem.style.setProperty("transition","none"))}),200)},stop(){!0===this.vars.animation&&(this.vars.animation=!1,this.vars.logo_elem.style.removeProperty("transform"),this.vars.text_elem.style.removeProperty("transform"),this.vars.logo_elem.style.removeProperty("transition"),this.vars.text_elem.style.removeProperty("transition"))},draw(){jb_DOManimation.vars.animation&&(window.requestAnimationFrame(jb_DOManimation.draw),jb_DOManimation.perspective())},ease:(e,t,a=.055)=>e+(t-e)*a},jb_main={init(e){jb_events.addEvents(),jb_scripts.contentChanger.init(),jb_anim.start("canvas#bg_canvas",{},e),(e=null)&&e()}};